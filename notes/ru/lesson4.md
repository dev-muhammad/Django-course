## Урок 4

# Инициализация рабочего окружения и проекта в Django

### Содержание
1. Обзор виртуального окружения (virtual environment)
2. Создание venv
3. Установка Django
4. Структура Django
5. Первый запуск и вход в админку

---

## 1. Обзор виртуального окружения (virtual environment)

Виртуальное окружение это среда для python для хранения зависимостей (установленных пакетов) в отдельной папке. Цель использования venv - это хранить зависимости каждого проекта отдельно. Если не использовать venv, то все установленные пакеты хранятся в глобальном окружении.

По умолчанию при установке полного пакета python 3.3  и выши модуль venv уже установлен в вашем устройстве. Для проверки введите данную команду в командной строке:

```
python -m venv test_venv
```

Если не выводило никаких ошибок и создалось папка test_venv в вашей директории запуска команды, то у вас уже установлен этот пакет. Если получили ошибку вероятно у вас установлен версия python ниже 3.3 или python не зарегистрирован в Path параметрах вашей системы. Убедитесь что у вас работает команда:

```
python -V
```
И выводить установленную версия python без ошибок. Если выводить ошибку, то попробуйте вот эти решения [линк](https://qna.habr.com/q/1133068), [линк](https://www.dz-techs.com/ru/python-windows-path)

---

## 2. Создание venv

1) Создайте новую папку для проекта и откройте папку с помощью VS Code. Также можно открыть VS Code и в пункте меню Файл > Открыть папку выберите вашу папку. 

2) Откройте командную строку с меню Терминал > Новый терминал

3) Создайте новое виртуальное окружение командой

```
python -m venv .venv
```
(Рекомендуется назвать окружения .venv, хотя можете назвать и по другому)

4) Активируйте ваше окружение

Windows
```
\.venv\Scripts\activate
```

MacOS или Linux
```
source .venv/bin/activate
```

Должно появляться название вашего окружения в начале командной строки

```
(.venv) C:\my_project
```

5) Проверьте версию python

```
python -V
```
Если показывает версию python то вы успешно активировали виртуальное окружение, если нет попробуйте ошибку поискать в интернете.

---

## 3. Установка Django

Для установки Django запустите команду в командной строке с активным виртуальным окружением.
```
pip install django
```
Для установки пакета у вас должно быть стабильное подключение к интернету. Пакет весить 8мб и в зависимости от скорости интернета длиться до несколько секунд. После успешной установке пакета вы увидите соответсвующую сообщение в командной строки.

Версию django можете проверить по команде:
```
python -m django --version
```

---

## Инициализация проекта

После успешной установки Django можно приступить к созданию проекта.

Команда для инициализации проекта:
```
django-admin startproject my_project
```
my_project это название проекта. После успешной завершение команды создается папка my_project, который имеет следующую структуру

```
my_project
│   manage.py
└─── my_project(конфигурационное приложение Django)
     │   asgi.py
     │   urls.py (корневая конфигурация URL)
     │   wsgi.py
     └── settings.py (настройки проекта)
```

В командной строке переходите в корневую папку проекта:
```
cd my_project
```
Дальнейшие команды запускаются с данной папки.

Сделаем первичную миграцию
```
python manage.py migrate
```

Создаем нового пользователя
```
python manage.py createsuperuser
```
Отвечайте на вопросы в командной строки.

Запускаем сервер
```
python manage.py runserver
```
Если перейти по адрес http://127.0.0.1:8000 в браузере вы уведете страницу об успешном запуски проекта
Также можно войти в админку по адресу http://127.0.0.1:8000/admin/ с учетными данными который создали в предыдущем шаге.

---

### Поздравляю, вы успешно создали и запустили Django проект. Создание кастомных приложений и моделей рассмотрим в следующем уроке.



## Задача для практики
Реализовать следующие эндпоинты (ручка):
- function based view ("Привет Django")
- class based view:
    - get ("Привет пользователь")
    - post ("Пользователь создан")
    - delete ("Пользователь удален")
    - patch ("Пользователь изменен")
- function based view
    - path params
        - first_name
        - last_name
    - return
        (first_name last_name)
